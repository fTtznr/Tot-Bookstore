{"ast":null,"code":"import lottieWeb from 'https://cdn.skypack.dev/lottie-web';\nexport default {\n  name: \"AudioPlayer\",\n  props: {\n    audio: String\n  },\n  mounted() {\n    class AudioPlayer extends HTMLElement {\n      constructor() {\n        super();\n        const template = document.querySelector('template');\n        const templateContent = template.content;\n        const shadow = this.attachShadow({\n          mode: 'open'\n        });\n        shadow.appendChild(templateContent.cloneNode(true));\n      }\n      connectedCallback() {\n        everything(this);\n      }\n    }\n    const everything = function (element) {\n      const shadow = element.shadowRoot;\n      const audioPlayerContainer = shadow.getElementById('audio-player-container');\n      const playIconContainer = shadow.getElementById('play-icon');\n      const seekSlider = shadow.getElementById('seek-slider');\n      const volumeSlider = shadow.getElementById('volume-slider');\n      const muteIconContainer = shadow.getElementById('mute-icon');\n      const audio = shadow.querySelector('audio');\n      const durationContainer = shadow.getElementById('duration');\n      const currentTimeContainer = shadow.getElementById('current-time');\n      const outputContainer = shadow.getElementById('volume-output');\n      let playState = 'play';\n      let muteState = 'unmute';\n      let raf = null;\n      audio.src = element.getAttribute('data-src');\n      const playAnimation = lottieWeb.loadAnimation({\n        container: playIconContainer,\n        path: 'https://maxst.icons8.com/vue-static/landings/animated-icons/icons/pause/pause.json',\n        renderer: 'svg',\n        loop: false,\n        autoplay: false,\n        name: \"Play Animation\"\n      });\n      const muteAnimation = lottieWeb.loadAnimation({\n        container: muteIconContainer,\n        path: 'https://maxst.icons8.com/vue-static/landings/animated-icons/icons/mute/mute.json',\n        renderer: 'svg',\n        loop: false,\n        autoplay: false,\n        name: \"Mute Animation\"\n      });\n      playAnimation.goToAndStop(14, true);\n      const whilePlaying = () => {\n        seekSlider.value = Math.floor(audio.currentTime);\n        currentTimeContainer.textContent = calculateTime(seekSlider.value);\n        audioPlayerContainer.style.setProperty('--seek-before-width', `${seekSlider.value / seekSlider.max * 100}%`);\n        raf = requestAnimationFrame(whilePlaying);\n      };\n      const showRangeProgress = rangeInput => {\n        if (rangeInput === seekSlider) audioPlayerContainer.style.setProperty('--seek-before-width', rangeInput.value / rangeInput.max * 100 + '%');else audioPlayerContainer.style.setProperty('--volume-before-width', rangeInput.value / rangeInput.max * 100 + '%');\n      };\n      const calculateTime = secs => {\n        const minutes = Math.floor(secs / 60);\n        const seconds = Math.floor(secs % 60);\n        const returnedSeconds = seconds < 10 ? `0${seconds}` : `${seconds}`;\n        return `${minutes}:${returnedSeconds}`;\n      };\n      const displayDuration = () => {\n        durationContainer.textContent = calculateTime(audio.duration);\n      };\n      const setSliderMax = () => {\n        seekSlider.max = Math.floor(audio.duration);\n      };\n      const displayBufferedAmount = () => {\n        const bufferedAmount = Math.floor(audio.buffered.end(audio.buffered.length - 1));\n        audioPlayerContainer.style.setProperty('--buffered-width', `${bufferedAmount / seekSlider.max * 100}%`);\n      };\n      if (audio.readyState > 0) {\n        displayDuration();\n        setSliderMax();\n        displayBufferedAmount();\n      } else {\n        audio.addEventListener('loadedmetadata', () => {\n          displayDuration();\n          setSliderMax();\n          displayBufferedAmount();\n        });\n      }\n      playIconContainer.addEventListener('click', () => {\n        if (playState === 'play') {\n          audio.play();\n          playAnimation.playSegments([14, 27], true);\n          requestAnimationFrame(whilePlaying);\n          playState = 'pause';\n        } else {\n          audio.pause();\n          playAnimation.playSegments([0, 14], true);\n          cancelAnimationFrame(raf);\n          playState = 'play';\n        }\n      });\n      muteIconContainer.addEventListener('click', () => {\n        if (muteState === 'unmute') {\n          muteAnimation.playSegments([0, 15], true);\n          audio.muted = true;\n          muteState = 'mute';\n        } else {\n          muteAnimation.playSegments([15, 25], true);\n          audio.muted = false;\n          muteState = 'unmute';\n        }\n      });\n      audio.addEventListener('progress', displayBufferedAmount);\n      seekSlider.addEventListener('input', e => {\n        showRangeProgress(e.target);\n        currentTimeContainer.textContent = calculateTime(seekSlider.value);\n        if (!audio.paused) {\n          cancelAnimationFrame(raf);\n        }\n      });\n      seekSlider.addEventListener('change', () => {\n        audio.currentTime = seekSlider.value;\n        if (!audio.paused) {\n          requestAnimationFrame(whilePlaying);\n        }\n      });\n      volumeSlider.addEventListener('input', e => {\n        const value = e.target.value;\n        showRangeProgress(e.target);\n        outputContainer.textContent = value;\n        audio.volume = value / 100;\n      });\n      if ('mediaSession' in navigator) {\n        navigator.mediaSession.metadata = new MediaMetadata({\n          title: 'Komorebi',\n          artist: 'Anitek',\n          album: 'MainStay',\n          artwork: [{\n            src: 'https://assets.codepen.io/4358584/1.300.jpg',\n            sizes: '96x96',\n            type: 'image/png'\n          }, {\n            src: 'https://assets.codepen.io/4358584/1.300.jpg',\n            sizes: '128x128',\n            type: 'image/png'\n          }, {\n            src: 'https://assets.codepen.io/4358584/1.300.jpg',\n            sizes: '192x192',\n            type: 'image/png'\n          }, {\n            src: 'https://assets.codepen.io/4358584/1.300.jpg',\n            sizes: '256x256',\n            type: 'image/png'\n          }, {\n            src: 'https://assets.codepen.io/4358584/1.300.jpg',\n            sizes: '384x384',\n            type: 'image/png'\n          }, {\n            src: 'https://assets.codepen.io/4358584/1.300.jpg',\n            sizes: '512x512',\n            type: 'image/png'\n          }]\n        });\n        navigator.mediaSession.setActionHandler('play', () => {\n          if (playState === 'play') {\n            audio.play();\n            playAnimation.playSegments([14, 27], true);\n            requestAnimationFrame(whilePlaying);\n            playState = 'pause';\n          } else {\n            audio.pause();\n            playAnimation.playSegments([0, 14], true);\n            cancelAnimationFrame(raf);\n            playState = 'play';\n          }\n        });\n        navigator.mediaSession.setActionHandler('pause', () => {\n          if (playState === 'play') {\n            audio.play();\n            playAnimation.playSegments([14, 27], true);\n            requestAnimationFrame(whilePlaying);\n            playState = 'pause';\n          } else {\n            audio.pause();\n            playAnimation.playSegments([0, 14], true);\n            cancelAnimationFrame(raf);\n            playState = 'play';\n          }\n        });\n        navigator.mediaSession.setActionHandler('seekbackward', details => {\n          audio.currentTime = audio.currentTime - (details.seekOffset || 10);\n        });\n        navigator.mediaSession.setActionHandler('seekforward', details => {\n          audio.currentTime = audio.currentTime + (details.seekOffset || 10);\n        });\n        navigator.mediaSession.setActionHandler('seekto', details => {\n          if (details.fastSeek && 'fastSeek' in audio) {\n            audio.fastSeek(details.seekTime);\n            return;\n          }\n          audio.currentTime = details.seekTime;\n        });\n        navigator.mediaSession.setActionHandler('stop', () => {\n          audio.currentTime = 0;\n          seekSlider.value = 0;\n          audioPlayerContainer.style.setProperty('--seek-before-width', '0%');\n          currentTimeContainer.textContent = '0:00';\n          if (playState === 'pause') {\n            playAnimation.playSegments([0, 14], true);\n            cancelAnimationFrame(raf);\n            playState = 'play';\n          }\n        });\n      }\n    };\n    customElements.define('audio-player', AudioPlayer);\n  }\n};","map":{"version":3,"mappings":"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","names":["lottieWeb","name","props","audio","String","mounted","AudioPlayer","HTMLElement","constructor","template","document","querySelector","templateContent","content","shadow","attachShadow","mode","appendChild","cloneNode","connectedCallback","everything","element","shadowRoot","audioPlayerContainer","getElementById","playIconContainer","seekSlider","volumeSlider","muteIconContainer","durationContainer","currentTimeContainer","outputContainer","playState","muteState","raf","src","getAttribute","playAnimation","loadAnimation","container","path","renderer","loop","autoplay","muteAnimation","goToAndStop","whilePlaying","value","Math","floor","currentTime","textContent","calculateTime","style","setProperty","max","requestAnimationFrame","showRangeProgress","rangeInput","secs","minutes","seconds","returnedSeconds","displayDuration","duration","setSliderMax","displayBufferedAmount","bufferedAmount","buffered","end","length","readyState","addEventListener","play","playSegments","pause","cancelAnimationFrame","muted","e","target","paused","volume","navigator","mediaSession","metadata","MediaMetadata","title","artist","album","artwork","sizes","type","setActionHandler","details","seekOffset","fastSeek","seekTime","customElements","define"],"sourceRoot":"","sources":["C:\\Users\\felip\\Desktop\\Tot Bookstore\\src\\components\\AudioPlayer.vue"],"sourcesContent":["<template>\r\n   \r\n    <div id=\"audio-player-container\">\r\n        <audio src=\"\" preload=\"metadata\" loop></audio>\r\n        <p>audio player ish</p>\r\n        <button id=\"play-icon\"></button>\r\n        <span id=\"current-time\" class=\"time\">0:00</span>\r\n        <input type=\"range\" id=\"seek-slider\" max=\"100\" value=\"0\">\r\n        <span id=\"duration\" class=\"time\">0:00</span>\r\n        <output id=\"volume-output\">100</output>\r\n        <input type=\"range\" id=\"volume-slider\" max=\"100\" value=\"100\">\r\n        <button id=\"mute-icon\"></button>\r\n    </div>\r\n\r\n    <audio-player :data-src=\"audio\"></audio-player>\r\n\r\n</template>\r\n\r\n\r\n<script>\r\n\r\nimport lottieWeb from 'https://cdn.skypack.dev/lottie-web';\r\n\r\nexport default {\r\n\r\n    name: \"AudioPlayer\",\r\n\r\n    props: {audio: String},\r\n    \r\n    mounted(){\r\n        \r\n        \r\n        class AudioPlayer extends HTMLElement {\r\n            constructor() {\r\n                super();\r\n                const template = document.querySelector('template');\r\n                const templateContent = template.content;\r\n                const shadow = this.attachShadow({mode: 'open'});\r\n                shadow.appendChild(templateContent.cloneNode(true));\r\n            }\r\n\r\n            connectedCallback() {\r\n                everything(this);\r\n            }\r\n        }\r\n\r\n        const everything = function(element) {  \r\n        const shadow = element.shadowRoot;\r\n\r\n            const audioPlayerContainer = shadow.getElementById('audio-player-container');\r\n            const playIconContainer = shadow.getElementById('play-icon');\r\n            const seekSlider = shadow.getElementById('seek-slider');\r\n            const volumeSlider = shadow.getElementById('volume-slider');\r\n            const muteIconContainer = shadow.getElementById('mute-icon');\r\n            const audio = shadow.querySelector('audio');\r\n            const durationContainer = shadow.getElementById('duration');\r\n            const currentTimeContainer = shadow.getElementById('current-time');\r\n            const outputContainer = shadow.getElementById('volume-output');\r\n            let playState = 'play';\r\n            let muteState = 'unmute';\r\n            let raf = null;\r\n\r\n            audio.src = element.getAttribute('data-src');\r\n\r\n            const playAnimation = lottieWeb.loadAnimation({\r\n                container: playIconContainer,\r\n                path: 'https://maxst.icons8.com/vue-static/landings/animated-icons/icons/pause/pause.json',\r\n                renderer: 'svg',\r\n                loop: false,\r\n                autoplay: false,\r\n                name: \"Play Animation\",\r\n            });\r\n                \r\n            const muteAnimation = lottieWeb.loadAnimation({\r\n                container: muteIconContainer,\r\n                path: 'https://maxst.icons8.com/vue-static/landings/animated-icons/icons/mute/mute.json',\r\n                renderer: 'svg',\r\n                loop: false,\r\n                autoplay: false,\r\n                name: \"Mute Animation\",\r\n            });\r\n                \r\n            playAnimation.goToAndStop(14, true);\r\n\r\n            const whilePlaying = () => {\r\n                seekSlider.value = Math.floor(audio.currentTime);\r\n                currentTimeContainer.textContent = calculateTime(seekSlider.value);\r\n                audioPlayerContainer.style.setProperty('--seek-before-width', `${seekSlider.value / seekSlider.max * 100}%`);\r\n                raf = requestAnimationFrame(whilePlaying);\r\n            }\r\n\r\n            const showRangeProgress = (rangeInput) => {\r\n                if(rangeInput === seekSlider) audioPlayerContainer.style.setProperty('--seek-before-width', rangeInput.value / rangeInput.max * 100 + '%');\r\n                else audioPlayerContainer.style.setProperty('--volume-before-width', rangeInput.value / rangeInput.max * 100 + '%');\r\n            }\r\n\r\n            const calculateTime = (secs) => {\r\n                const minutes = Math.floor(secs / 60);\r\n                const seconds = Math.floor(secs % 60);\r\n                const returnedSeconds = seconds < 10 ? `0${seconds}` : `${seconds}`;\r\n                return `${minutes}:${returnedSeconds}`;\r\n            }\r\n                \r\n            const displayDuration = () => {\r\n                durationContainer.textContent = calculateTime(audio.duration);\r\n            }\r\n                \r\n            const setSliderMax = () => {\r\n                seekSlider.max = Math.floor(audio.duration);\r\n            }\r\n                \r\n            const displayBufferedAmount = () => {\r\n                const bufferedAmount = Math.floor(audio.buffered.end(audio.buffered.length - 1));\r\n                audioPlayerContainer.style.setProperty('--buffered-width', `${(bufferedAmount / seekSlider.max) * 100}%`);\r\n            }\r\n\r\n            if (audio.readyState > 0) {\r\n                displayDuration();\r\n                setSliderMax();\r\n                displayBufferedAmount();\r\n            } else {\r\n                audio.addEventListener('loadedmetadata', () => {\r\n                    displayDuration();\r\n                    setSliderMax();\r\n                    displayBufferedAmount();\r\n                });\r\n            }\r\n\r\n            playIconContainer.addEventListener('click', () => {\r\n                if(playState === 'play') {\r\n                    audio.play();\r\n                    playAnimation.playSegments([14, 27], true);\r\n                    requestAnimationFrame(whilePlaying);\r\n                    playState = 'pause';\r\n                } else {\r\n                    audio.pause();\r\n                    playAnimation.playSegments([0, 14], true);\r\n                    cancelAnimationFrame(raf);\r\n                    playState = 'play';\r\n                }\r\n            });\r\n                \r\n            muteIconContainer.addEventListener('click', () => {\r\n                if(muteState === 'unmute') {\r\n                    muteAnimation.playSegments([0, 15], true);\r\n                    audio.muted = true;\r\n                    muteState = 'mute';\r\n                } else {\r\n                    muteAnimation.playSegments([15, 25], true);\r\n                    audio.muted = false;\r\n                    muteState = 'unmute';\r\n                }\r\n            });\r\n\r\n            audio.addEventListener('progress', displayBufferedAmount);\r\n\r\n            seekSlider.addEventListener('input', (e) => {\r\n                showRangeProgress(e.target);\r\n                currentTimeContainer.textContent = calculateTime(seekSlider.value);\r\n                if(!audio.paused) {\r\n                    cancelAnimationFrame(raf);\r\n                }\r\n            });\r\n\r\n            seekSlider.addEventListener('change', () => {\r\n                audio.currentTime = seekSlider.value;\r\n                if(!audio.paused) {\r\n                    requestAnimationFrame(whilePlaying);\r\n                }\r\n            });\r\n\r\n            volumeSlider.addEventListener('input', (e) => {\r\n                const value = e.target.value;\r\n                showRangeProgress(e.target);\r\n                outputContainer.textContent = value;\r\n                audio.volume = value / 100;\r\n            });\r\n\r\n            if('mediaSession' in navigator) {\r\n                navigator.mediaSession.metadata = new MediaMetadata({\r\n                    title: 'Komorebi',\r\n                    artist: 'Anitek',\r\n                    album: 'MainStay',\r\n                    artwork: [\r\n                        { src: 'https://assets.codepen.io/4358584/1.300.jpg', sizes: '96x96', type: 'image/png' },\r\n                        { src: 'https://assets.codepen.io/4358584/1.300.jpg', sizes: '128x128', type: 'image/png' },\r\n                        { src: 'https://assets.codepen.io/4358584/1.300.jpg', sizes: '192x192', type: 'image/png' },\r\n                        { src: 'https://assets.codepen.io/4358584/1.300.jpg', sizes: '256x256', type: 'image/png' },\r\n                        { src: 'https://assets.codepen.io/4358584/1.300.jpg', sizes: '384x384', type: 'image/png' },\r\n                        { src: 'https://assets.codepen.io/4358584/1.300.jpg', sizes: '512x512', type: 'image/png' }\r\n                    ]\r\n                });\r\n                navigator.mediaSession.setActionHandler('play', () => {\r\n                    if(playState === 'play') {\r\n                        audio.play();\r\n                        playAnimation.playSegments([14, 27], true);\r\n                        requestAnimationFrame(whilePlaying);\r\n                        playState = 'pause';\r\n                    } else {\r\n                        audio.pause();\r\n                        playAnimation.playSegments([0, 14], true);\r\n                        cancelAnimationFrame(raf);\r\n                        playState = 'play';\r\n                    }\r\n                });\r\n                navigator.mediaSession.setActionHandler('pause', () => {\r\n                    if(playState === 'play') {\r\n                        audio.play();\r\n                        playAnimation.playSegments([14, 27], true);\r\n                        requestAnimationFrame(whilePlaying);\r\n                        playState = 'pause';\r\n                    } else {\r\n                        audio.pause();\r\n                        playAnimation.playSegments([0, 14], true);\r\n                        cancelAnimationFrame(raf);\r\n                        playState = 'play';\r\n                    }\r\n                });\r\n                navigator.mediaSession.setActionHandler('seekbackward', (details) => {\r\n                    audio.currentTime = audio.currentTime - (details.seekOffset || 10);\r\n                });\r\n                navigator.mediaSession.setActionHandler('seekforward', (details) => {\r\n                    audio.currentTime = audio.currentTime + (details.seekOffset || 10);\r\n                });\r\n                navigator.mediaSession.setActionHandler('seekto', (details) => {\r\n                    if (details.fastSeek && 'fastSeek' in audio) {\r\n                    audio.fastSeek(details.seekTime);\r\n                    return;\r\n                    }\r\n                    audio.currentTime = details.seekTime;\r\n                });\r\n                navigator.mediaSession.setActionHandler('stop', () => {\r\n                    audio.currentTime = 0;\r\n                    seekSlider.value = 0;\r\n                    audioPlayerContainer.style.setProperty('--seek-before-width', '0%');\r\n                    currentTimeContainer.textContent = '0:00';\r\n                    if(playState === 'pause') {\r\n                        playAnimation.playSegments([0, 14], true);\r\n                        cancelAnimationFrame(raf);\r\n                        playState = 'play';\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n        customElements.define('audio-player', AudioPlayer);\r\n\r\n     }\r\n    \r\n}\r\n\r\n</script>\r\n\r\n<style>\r\n    button {\r\n        padding: 0;\r\n        border: 0;\r\n        background: transparent;\r\n        cursor: pointer;\r\n        outline: none;\r\n        width: 40px;\r\n        height: 40px;\r\n        float: left;\r\n    }\r\n    #audio-player-container {\r\n        position: relative;\r\n        margin: 100px 2.5% auto 2.5%;\r\n        width: 95%;\r\n        max-width: 500px;\r\n        height: 132px;\r\n        background: #fff;\r\n        font-family: Arial, Helvetica, sans-serif;\r\n        --seek-before-width: 0%;\r\n        --volume-before-width: 100%;\r\n        --buffered-width: 0%;\r\n        letter-spacing: -0.5px;\r\n    }\r\n    #audio-player-container::before {\r\n        position: absolute;\r\n        content: '';\r\n        width: calc(100% + 4px);\r\n        height: calc(100% + 4px);\r\n        left: -2px;\r\n        top: -2px;\r\n        background: linear-gradient(to left, #007db5, #ff8a00);\r\n        z-index: -1;\r\n    }\r\n    p {\r\n        position: absolute;\r\n        top: -18px;\r\n        right: 5%;\r\n        padding: 0 5px;\r\n        margin: 0;\r\n        font-size: 28px;\r\n        background: #fff;\r\n    }\r\n    #play-icon {\r\n        margin: 20px 2.5% 10px 2.5%;\r\n    }\r\n    path {\r\n        stroke: #007db5;\r\n    }\r\n    .time {\r\n        display: inline-block;\r\n        width: 37px;\r\n        text-align: center;\r\n        font-size: 20px;\r\n        margin: 28.5px 0 18.5px 0;\r\n        float: left;\r\n    }\r\n    output {\r\n        display: inline-block;\r\n        width: 32px;\r\n        text-align: center;\r\n        font-size: 20px;\r\n        margin: 10px 2.5% 0 5%;\r\n        float: left;\r\n        clear: left;\r\n    }\r\n    #volume-slider {\r\n        margin: 10px 2.5%;\r\n        width: 58%;\r\n    }\r\n    #volume-slider::-webkit-slider-runnable-track {\r\n        background: rgba(0, 125, 181, 0.6);\r\n    }\r\n    #volume-slider::-moz-range-track {\r\n        background: rgba(0, 125, 181, 0.6);\r\n    }\r\n    #volume-slider::-ms-fill-upper {\r\n        background: rgba(0, 125, 181, 0.6);\r\n    }\r\n    #volume-slider::before {\r\n        width: var(--volume-before-width);\r\n    }\r\n    #mute-icon {\r\n        margin: 0 2.5%;\r\n    }\r\n    input[type=\"range\"] {\r\n        position: relative;\r\n        -webkit-appearance: none;\r\n        width: 48%;\r\n        margin: 0;\r\n        padding: 0;\r\n        height: 19px;\r\n        margin: 30px 2.5% 20px 2.5%;\r\n        float: left;\r\n        outline: none;\r\n    }\r\n    input[type=\"range\"]::-webkit-slider-runnable-track {\r\n        width: 100%;\r\n        height: 3px;\r\n        cursor: pointer;\r\n        background: linear-gradient(to right, rgba(0, 125, 181, 0.6) var(--buffered-width), rgba(0, 125, 181, 0.2) var(--buffered-width));\r\n    }\r\n    input[type=\"range\"]::before {\r\n        position: absolute;\r\n        content: \"\";\r\n        top: 8px;\r\n        left: 0;\r\n        width: var(--seek-before-width);\r\n        height: 3px;\r\n        background-color: #007db5;\r\n        cursor: pointer;\r\n    }\r\n    input[type=\"range\"]::-webkit-slider-thumb {\r\n        position: relative;\r\n        -webkit-appearance: none;\r\n        box-sizing: content-box;\r\n        border: 1px solid #007db5;\r\n        height: 15px;\r\n        width: 15px;\r\n        border-radius: 50%;\r\n        background-color: #fff;\r\n        cursor: pointer;\r\n        margin: -7px 0 0 0;\r\n    }\r\n    input[type=\"range\"]:active::-webkit-slider-thumb {\r\n        transform: scale(1.2);\r\n        background: #007db5;\r\n    }\r\n    input[type=\"range\"]::-moz-range-track {\r\n        width: 100%;\r\n        height: 3px;\r\n        cursor: pointer;\r\n        background: linear-gradient(to right, rgba(0, 125, 181, 0.6) var(--buffered-width), rgba(0, 125, 181, 0.2) var(--buffered-width));\r\n    }\r\n    input[type=\"range\"]::-moz-range-progress {\r\n        background-color: #007db5;\r\n    }\r\n    input[type=\"range\"]::-moz-focus-outer {\r\n        border: 0;\r\n    }\r\n    input[type=\"range\"]::-moz-range-thumb {\r\n        box-sizing: content-box;\r\n        border: 1px solid #007db5;\r\n        height: 15px;\r\n        width: 15px;\r\n        border-radius: 50%;\r\n        background-color: #fff;\r\n        cursor: pointer;\r\n    }\r\n    input[type=\"range\"]:active::-moz-range-thumb {\r\n        transform: scale(1.2);\r\n        background: #007db5;\r\n    }\r\n    input[type=\"range\"]::-ms-track {\r\n        width: 100%;\r\n        height: 3px;\r\n        cursor: pointer;\r\n        background: transparent;\r\n        border: solid transparent;\r\n        color: transparent;\r\n    }\r\n    input[type=\"range\"]::-ms-fill-lower {\r\n        background-color: #007db5;\r\n    }\r\n    input[type=\"range\"]::-ms-fill-upper {\r\n        background: linear-gradient(to right, rgba(0, 125, 181, 0.6) var(--buffered-width), rgba(0, 125, 181, 0.2) var(--buffered-width));\r\n    }\r\n    input[type=\"range\"]::-ms-thumb {\r\n        box-sizing: content-box;\r\n        border: 1px solid #007db5;\r\n        height: 15px;\r\n        width: 15px;\r\n        border-radius: 50%;\r\n        background-color: #fff;\r\n        cursor: pointer;\r\n    }\r\n    input[type=\"range\"]:active::-ms-thumb {\r\n        transform: scale(1.2);\r\n        background: #007db5;\r\n    }\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}