{"ast":null,"code":"import { defineStore } from \"pinia\";\nimport { ref, reactive } from 'vue';\nexport const bookStore = defineStore(\"books\", {\n  state: () => {\n    return {\n      books: null,\n      lastSeen: null,\n      searchResult: reactive(null),\n      highlights: null,\n      deleteCounter: 0,\n      filterReference: null\n    };\n  },\n  actions: {\n    async initBooks() {\n      try {\n        const req = await fetch(\"http://localhost:3000/books\");\n        this.books = await req.json();\n        this.highlights = this.books.sort((a, b) => b.likedPercent - a.likedPercent).slice(0, 15);\n        this.searchResult = this.highlights;\n      } catch (error) {}\n    },\n    home() {\n      this.searchResult = this.highlights;\n    },\n    async deleteBook(bookId) {\n      try {\n        const req = await fetch(`http://localhost:3000/books/${bookId}`, {\n          method: \"DELETE\"\n        });\n        const res = await req.json();\n        this.initBooks();\n      } catch (error) {}\n    },\n    async updateBook(book) {\n      try {\n        const dataJSON = JSON.stringify(book);\n        const req = await fetch(`http://localhost:3000/books/${book.id}`, {\n          method: \"PATCH\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: dataJSON\n        });\n        const res = await req.json();\n      } catch (error) {}\n    }\n  }\n});","map":{"version":3,"names":["defineStore","ref","reactive","bookStore","state","books","lastSeen","searchResult","highlights","deleteCounter","filterReference","actions","initBooks","req","fetch","json","sort","a","b","likedPercent","slice","error","home","deleteBook","bookId","method","res","updateBook","book","dataJSON","JSON","stringify","id","headers","body"],"sources":["C:/Users/felip/Desktop/Tot Bookstore/src/store/books.js"],"sourcesContent":["import { defineStore } from \"pinia\"\r\nimport { ref, reactive } from 'vue'\r\n\r\n\r\nexport const bookStore = defineStore(\"books\", {\r\n\r\n    state: () => {\r\n\r\n        return {\r\n\r\n            books: null,\r\n            lastSeen: null,\r\n            searchResult: reactive(null),\r\n            highlights: null,\r\n            deleteCounter: 0,\r\n            filterReference: null\r\n\r\n        }\r\n\r\n    },\r\n\r\n    actions:{\r\n\r\n        async initBooks()\r\n        {\r\n  \r\n            try{\r\n\r\n                const req = await fetch(\"http://localhost:3000/books\")\r\n            \r\n                this.books = await req.json()\r\n                this.highlights = this.books.sort( (a, b) =>  b.likedPercent - a.likedPercent).slice(0,15)\r\n                this.searchResult =this.highlights\r\n                \r\n            } catch (error) {}\r\n            \r\n            \r\n        },\r\n\r\n        home(){\r\n            this.searchResult = this.highlights\r\n        },\r\n\r\n        async deleteBook(bookId)\r\n        { \r\n            try{\r\n\r\n                const req = await fetch(`http://localhost:3000/books/${bookId}`, {\r\n\r\n                    method: \"DELETE\",\r\n    \r\n                })\r\n            \r\n                const res = await req.json()\r\n    \r\n                this.initBooks() \r\n                \r\n            } catch (error) {}\r\n        \r\n        },\r\n\r\n        async updateBook(book)\r\n        { \r\n            try{\r\n\r\n                const dataJSON = JSON.stringify(book)\r\n            \r\n                const req = await fetch(`http://localhost:3000/books/${book.id}`, {\r\n\r\n                    method: \"PATCH\",\r\n                    headers: {\"Content-Type\": \"application/json\"},\r\n                    body: dataJSON\r\n\r\n                })\r\n\r\n            const res = await req.json()\r\n\r\n \r\n            } catch (error) {}\r\n  \r\n            \r\n        \r\n        },\r\n        \r\n    }\r\n\r\n\r\n})"],"mappings":"AAAA,SAASA,WAAW,QAAQ,OAAO;AACnC,SAASC,GAAG,EAAEC,QAAQ,QAAQ,KAAK;AAGnC,OAAO,MAAMC,SAAS,GAAGH,WAAW,CAAC,OAAO,EAAE;EAE1CI,KAAK,EAAE,MAAM;IAET,OAAO;MAEHC,KAAK,EAAE,IAAI;MACXC,QAAQ,EAAE,IAAI;MACdC,YAAY,EAAEL,QAAQ,CAAC,IAAI,CAAC;MAC5BM,UAAU,EAAE,IAAI;MAChBC,aAAa,EAAE,CAAC;MAChBC,eAAe,EAAE;IAErB,CAAC;EAEL,CAAC;EAEDC,OAAO,EAAC;IAEJ,MAAMC,SAAS,GACf;MAEI,IAAG;QAEC,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,6BAA6B,CAAC;QAEtD,IAAI,CAACT,KAAK,GAAG,MAAMQ,GAAG,CAACE,IAAI,EAAE;QAC7B,IAAI,CAACP,UAAU,GAAG,IAAI,CAACH,KAAK,CAACW,IAAI,CAAE,CAACC,CAAC,EAAEC,CAAC,KAAMA,CAAC,CAACC,YAAY,GAAGF,CAAC,CAACE,YAAY,CAAC,CAACC,KAAK,CAAC,CAAC,EAAC,EAAE,CAAC;QAC1F,IAAI,CAACb,YAAY,GAAE,IAAI,CAACC,UAAU;MAEtC,CAAC,CAAC,OAAOa,KAAK,EAAE,CAAC;IAGrB,CAAC;IAEDC,IAAI,GAAE;MACF,IAAI,CAACf,YAAY,GAAG,IAAI,CAACC,UAAU;IACvC,CAAC;IAED,MAAMe,UAAU,CAACC,MAAM,EACvB;MACI,IAAG;QAEC,MAAMX,GAAG,GAAG,MAAMC,KAAK,CAAE,+BAA8BU,MAAO,EAAC,EAAE;UAE7DC,MAAM,EAAE;QAEZ,CAAC,CAAC;QAEF,MAAMC,GAAG,GAAG,MAAMb,GAAG,CAACE,IAAI,EAAE;QAE5B,IAAI,CAACH,SAAS,EAAE;MAEpB,CAAC,CAAC,OAAOS,KAAK,EAAE,CAAC;IAErB,CAAC;IAED,MAAMM,UAAU,CAACC,IAAI,EACrB;MACI,IAAG;QAEC,MAAMC,QAAQ,GAAGC,IAAI,CAACC,SAAS,CAACH,IAAI,CAAC;QAErC,MAAMf,GAAG,GAAG,MAAMC,KAAK,CAAE,+BAA8Bc,IAAI,CAACI,EAAG,EAAC,EAAE;UAE9DP,MAAM,EAAE,OAAO;UACfQ,OAAO,EAAE;YAAC,cAAc,EAAE;UAAkB,CAAC;UAC7CC,IAAI,EAAEL;QAEV,CAAC,CAAC;QAEN,MAAMH,GAAG,GAAG,MAAMb,GAAG,CAACE,IAAI,EAAE;MAG5B,CAAC,CAAC,OAAOM,KAAK,EAAE,CAAC;IAIrB;EAEJ;AAGJ,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}